<div ng-controller="MenuCtrl">

  <div id="menu">

    <input id="input-open-project" type="file" accept=".ice" class="hidden"/>
    <input id="input-save-project" type="file" accept=".ice" class="hidden" nwsaveas="{{ common.projectName }}"/>

    <input id="input-import-block" type="file" accept=".iceb" class="hidden"/>
    <input id="input-export-block" type="file" accept=".iceb" class="hidden" nwsaveas="{{ common.projectName }}"/>

    <nav class="navbar navbar-default" role="navigation">

        <div class="collapse navbar-collapse" ng-class="!navCollapsed && 'in'">

            <ul class="nav navbar-nav">

                <li uib-dropdown>
                    <a href uib-dropdown-toggle>File <span class="caret"></span></a>
                    <ul uib-dropdown-menu>
                      <li>
                        <a href ng-click="newProject()">{{ 'New project' | translate }}</a>
                      </li>
                      <li>
                        <a href ng-click="openProject()">{{ 'Open project' | translate }}</a>
                      </li>
                      <li class="dropdown-submenu" uib-dropdown>
                        <a href uib-dropdown-toggle> {{ 'Examples' | translate }}</a>
                        <ul uib-dropdown-menu>
                           <li class="dropdown-submenu" ng-repeat="(category, projects) in examples">
                             <a href uib-dropdown-toggle>{{ category }}</a>
                             <ul uib-dropdown-menu>
                               <li ng-repeat="(name, project) in projects">
                                 <a href ng-click="openExample(name, project)">
                                 {{ name }}
                                 </a>
                               </li>
                             </ul>
                           </li>
                         </ul>
                      </li>
                      <li class="divider"></li>
                      <li>
                        <a href ng-click="saveProject()">{{ 'Save' | translate }}</a>
                      </li>
                      <li>
                        <a href ng-click="saveProjectAs()">{{ 'Save as' | translate }}</a>
                      </li>
                      <li class="divider"></li>
                      <li>
                        <a href ng-click="importBlock()">{{ 'Import block' | translate }}</a>
                      </li>
                      <li>
                        <a href ng-click="exportAsBlock()">{{ 'Export as block' | translate }}</a>
                      </li>
                    </ul>
                </li>

                <li uib-dropdown>
                    <a href uib-dropdown-toggle>Edit  <span class="caret"></span></a>
                    <ul class="dropdown-menu" uib-dropdown-menu>
                      <li>
                        <a href ng-click="clearGraph()">{{ 'Clear graph' | translate }}</a>
                      </li>
                      <li>
                        <a href ng-click="cloneSelected()">{{ 'Clone selected' | translate }}</a>
                      </li>
                      <li>
                        <a href ng-click="removeSelected()">{{ 'Remove selected' | translate }}</a>
                      </li>
                    </ul>
                </li>

                <li uib-dropdown>
                    <a href uib-dropdown-toggle>Boards  <span class="caret"></span></a>
                    <ul class="dropdown-menu" uib-dropdown-menu>
                      <li ng-repeat="board in currentBoards">
                        <a href ng-click="selectBoard(board)">
                          {{ board.label }}
                          <span ng-show="boards.selectedBoard.id == board.id" class="glyphicon glyphicon-ok-circle"></span>
                        </a>
                      </li>
                    </ul>
                </li>

                <li uib-dropdown>
                    <a href uib-dropdown-toggle>Tools  <span class="caret"></span></a>
                    <ul class="dropdown-menu" uib-dropdown-menu>
                      <!--<li>
                        <a href ng-click="verifyCode()">{{ 'Verify' | translate }}</a>
                      </li>-->
                      <li>
                        <a href ng-click="buildCode()">{{ 'Build' | translate }}</a>
                      </li>
                      <li>
                        <a href ng-click="uploadCode()">{{ 'Upload' | translate }}</a>
                      </li>
                      <li class="divider"></li>
                      <li>
                        <a href ng-click="installToolchain()">{{ 'Install toolchain' | translate }}</a>
                      </li>
                      <li>
                        <a href ng-click="removeToolchain()">{{ 'Remove toolchain' | translate }}</a>
                      </li>
                    </ul>
                </li>

                <li uib-dropdown>
                    <a href uib-dropdown-toggle>Help  <span class="caret"></span></a>
                    <ul class="dropdown-menu" uib-dropdown-menu>
                      <li disabled>
                        <a href ng-click="openUrl('https://www.gnu.org/licenses/old-licenses/gpl-2.0.html')">{{ 'View license' | translate }}</a>
                      </li>
                      <li class="disabled">
                        <a href>{{ 'Version ' + version | translate }}</a>
                      </li>
                      <li class="divider"></li>
                      <li>
                        <a href ng-click="openUrl('http://icestudio.readthedocs.io/en/latest/')">{{ 'Documentation' | translate }}</a>
                      </li>
                      <li>
                        <a href ng-click="openUrl('https://github.com/FPGAwars/icestudio')">{{ 'Source code' | translate }}</a>
                      </li>
                      <li class="divider"></li>
                      <li>
                        <a href ng-click="openUrl('https://groups.google.com/forum/#!forum/fpga-wars-explorando-el-lado-libre')">{{ 'Community forum' | translate }}</a>
                      </li>
                      <li class="divider"></li>
                      <li>
                        <a href ng-click="">{{ 'About Icestudio' | translate }}</a>
                      </li>
                    </ul>
                </li>

            </ul>

            <ul class="nav navbar-nav navbar-right">

                <li uib-dropdown>
                    <a href uib-dropdown-toggle>basic <span class="caret"></span></a>
                    <ul class="dropdown-menu" uib-dropdown-menu>
                      <li>
                        <a href ng-click="common.addBlock('basic.code')">{{ 'code' | translate }}</a>
                        <a href ng-click="common.addBlock('basic.input')">{{ 'input' | translate }}</a>
                        <a href ng-click="common.addBlock('basic.output')">{{ 'output' | translate }}</a>
                      </li>
                    </ul>
                </li>

                <li uib-dropdown ng-repeat="(category, blocks) in menuBlocks">
                    <a href uib-dropdown-toggle>{{ category }} <span class="caret"></span></a>
                    <ul class="dropdown-menu" uib-dropdown-menu>
                      <li ng-repeat="(name, block) in blocks">
                        <a href ng-click="common.addBlock(category + '.' + name, block)">
                          {{ name }}
                        </a>
                      </li>
                    </ul>
                </li>

            </ul>

        </div>
    </nav>
  </div>
</div>
